  console.log
    â‰¡Æ’Ã¶Ã¦ [Auth] Init - Token exists? false

      at log (contexts/AuthContext.tsx:102:17)

  console.log
    â‰¡Æ’Ã¦Ã± [Auth] Init - User exists? false

      at log (contexts/AuthContext.tsx:103:17)

  console.log
    Î“ÃœÃ¡âˆ©â••Ã… [Auth] No stored token found

      at log (contexts/AuthContext.tsx:134:19)

  console.log
    Î“Â£Ã  [Auth] Initialization complete

      at log (contexts/AuthContext.tsx:140:17)

(node:23372) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
  console.log
    â‰¡Æ’Ã¶Ã¦ [Auth] Attempting login...

      at log (contexts/AuthContext.tsx:158:13)

  console.error
    Î“Â¥Ã® [Auth] Login error: _api.default.post is not a function

    [0m [90m 183 |[39m
     [90m 184 |[39m     } [36mcatch[39m (error[33m:[39m any) {
    [31m[1m>[22m[39m[90m 185 |[39m       console[33m.[39merror([32m'Î“Â¥Ã® [Auth] Login error:'[39m[33m,[39m error[33m.[39mresponse[33m?[39m[33m.[39mdata [33m||[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 186 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m(error[33m.[39mresponse[33m?[39m[33m.[39mdata[33m?[39m[33m.[39mdetail [33m||[39m [32m'Login failed'[39m)[33m;[39m
     [90m 187 |[39m     }
     [90m 188 |[39m   }[33m;[39m[0m

      at error (contexts/AuthContext.tsx:185:15)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (contexts/AuthContext.tsx:157:14)
      at Object.login [as onPress] (contexts/auth.test.tsx:47:50)
      at onPress (contexts/auth.test.tsx:85:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at Object.<anonymous> (contexts/auth.test.tsx:84:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  console.log
    â‰¡Æ’Ã¶Ã¦ [Auth] Init - Token exists? false

      at log (contexts/AuthContext.tsx:102:17)

  console.log
    â‰¡Æ’Ã¦Ã± [Auth] Init - User exists? false

      at log (contexts/AuthContext.tsx:103:17)

  console.log
    Î“ÃœÃ¡âˆ©â••Ã… [Auth] No stored token found

      at log (contexts/AuthContext.tsx:134:19)

  console.log
    Î“Â£Ã  [Auth] Initialization complete

      at log (contexts/AuthContext.tsx:140:17)

  console.log
    â‰¡Æ’ÃœÂ¬ [Auth] Attempting logout...

      at Object.log (contexts/AuthContext.tsx:214:13)

  console.log
    Î“Â£Ã  [Auth] Logout completed successfully

      at Object.log (contexts/AuthContext.tsx:236:15)

FAIL contexts/auth.test.tsx
  AuthContext
    â”œÃ¹ login stores token and updates user state (2602 ms)
    â”œÃ¹ logout clears token and user state (11 ms)

  Î“Ã¹Ã… AuthContext Î“Ã‡â•‘ login stores token and updates user state

    Login failed

      184 |     } catch (error: any) {
      185 |       console.error('Î“Â¥Ã® [Auth] Login error:', error.response?.data || error.message);
    > 186 |       throw new Error(error.response?.data?.detail || 'Login failed');
          |             ^
      187 |     }
      188 |   };
      189 |

      at contexts/AuthContext.tsx:186:13
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (contexts/AuthContext.tsx:157:14)
      at Object.login [as onPress] (contexts/auth.test.tsx:47:50)
      at onPress (contexts/auth.test.tsx:85:31)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at Object.<anonymous> (contexts/auth.test.tsx:84:18)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  Î“Ã¹Ã… AuthContext Î“Ã‡â•‘ login stores token and updates user state

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "/auth/token", Any<Object>, Any<Object>

    Number of calls: 0

      87 |
      88 |         // Verify API call
    > 89 |         expect(axios.post).toHaveBeenCalledWith(expect.stringContaining('/auth/token'), expect.any(Object), expect.any(Object));
         |                            ^
      90 |
      91 |         // Verify Token Storage
      92 |         expect(AsyncStorage.setItem).toHaveBeenCalledWith('token', mockToken);

      at Object.toHaveBeenCalledWith (contexts/auth.test.tsx:89:28)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

  Î“Ã¹Ã… AuthContext Î“Ã‡â•‘ logout clears token and user state

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "token"
    Received
           1: "patients_cache"
           2: "medical_call_logs"
           3: "contacts_sync_enabled"

    Number of calls: 3

      115 |
      116 |         // Verify Token Removal
    > 117 |         expect(AsyncStorage.removeItem).toHaveBeenCalledWith('token');
          |                                         ^
      118 |         expect(AsyncStorage.removeItem).toHaveBeenCalledWith('user');
      119 |     });
      120 | });

      at Object.toHaveBeenCalledWith (contexts/auth.test.tsx:117:41)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 total
Snapshots:   0 total
Time:        5.194 s
Ran all test suites matching /contexts\\auth.test.tsx/i.
